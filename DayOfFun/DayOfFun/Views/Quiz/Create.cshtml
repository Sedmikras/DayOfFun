@using Microsoft.CodeAnalysis.Scripting
@model DayOfFun.Model.Quiz

@{
    ViewData["Title"] = "Create new quiz";
    ViewBag.Title = "title";
    Layout = "_Layout";
}

<div class="row text">
    <div class="col-md-8 offset-2">
        <p>
            <h1>Create new quiz</h1>
        </p>
        <div class="row">
            <div class="col-md-8 offset-2">
                <form asp-action="Create">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="form-group">
                        <label asp-for="Title" class="control-label"></label>
                        <input asp-for="Title" class="form-control"/>
                        <span asp-validation-for="Title" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <div id="pattern">
                            <label asp-for="Questions[0].Text" class="control-label d-none"></label>
                            <input asp-for="Questions[0].Text" class="form-control d-none"/>
                        </div>
                        <a class="btn btn-outline-secondary" onclick="AddQuestion()">Add Question</a>
                        <div class="row" id="questions">
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Create" class="btn btn-outline-success float-right"/>
                        <a class="btn btn-outline-secondary" asp-action="Index">Show all</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts
{
    <script>
        var counter = 0;
        function AddQuestion() {
            debugger;
            var htmlTag = document.getElementById("pattern");
            var label = htmlTag.children[0];
            var input = htmlTag.children[1];
            var text = htmlTag.innerHTML.replaceAll("Questions_" + counter, "Questions_" + (counter +1));
            text.replaceAll("Questions["+counter + "]", "Questions["+ (counter + 1) + "]")
            var label = document.createElement("label");
            label.setAttribute("class", "control-label");
            var div = document.createElement("div");
            div.setAttribute("class", "form-control");
            div.setAttribute("asp-for", "Questions["+counter + "].Text");
            htmlTag.append(input);
        }
        
    </script>
}
